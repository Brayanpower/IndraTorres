{"ast":null,"code":"import { __decorate } from \"tslib\";\n// ciudad.component.ts\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { ModalSeleccionPaisComponent } from '../../tu-ruta/modal-seleccion-pais/modal-seleccion-pais.component';\nexport let CiudadComponent = class CiudadComponent {\n  constructor(ciudadService, paisService, fb, modalService) {\n    this.ciudadService = ciudadService;\n    this.paisService = paisService;\n    this.fb = fb;\n    this.modalService = modalService;\n    this.ciudades = [];\n    this.datosPaises = [];\n    this.editingCiudadId = null;\n    this.ciudadForm = this.fb.group({\n      _id: [''],\n      nombre: ['', Validators.required],\n      pais: ['', Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.cargarCiudades();\n    this.cargarDatosP();\n  }\n  cargarCiudades() {\n    this.ciudadService.getDatosP().subscribe(data => {\n      this.ciudades = data;\n      console.log('Ciudades cargadas:', this.ciudades);\n    }, error => {\n      console.error('Error al cargar ciudades:', error);\n    });\n  }\n  cargarDatosP() {\n    this.paisService.getDatosP().subscribe(data => {\n      this.datosPaises = data;\n      console.log('Datos cargados:', this.datosPaises);\n    }, error => {\n      console.error('Error al cargar datos:', error);\n    });\n  }\n  crearCiudad(event) {\n    event.preventDefault();\n    if (this.ciudadForm.valid) {\n      const nuevaCiudad = {\n        nombre: this.ciudadForm.value.nombre,\n        pais: this.ciudadForm.value.pais\n      };\n      this.ciudadService.addDatosP(nuevaCiudad).subscribe(data => {\n        console.log('Ciudad creada:', data);\n        this.ciudadForm.reset();\n        this.cargarCiudades();\n      }, error => {\n        console.error('Error al crear ciudad:', error);\n      });\n    } else {\n      console.error('Formulario no válido. Por favor, complete todos los campos requeridos.');\n    }\n  }\n  abrirModalSeleccionPais() {\n    const modalRef = this.modalService.open(ModalSeleccionPaisComponent);\n    modalRef.result.then(result => {\n      // Aquí puedes manejar el resultado seleccionado, por ejemplo:\n      this.ciudadForm.patchValue({\n        pais: result.nombre\n      });\n    }, reason => {\n      // Manejar cierre del modal sin selección si es necesario\n    });\n  }\n  editarCiudad(ciudad) {\n    this.editingCiudadId = ciudad._id;\n    this.ciudadForm.patchValue({\n      _id: ciudad._id,\n      nombre: ciudad.nombre,\n      pais: ciudad.pais\n    });\n  }\n  eliminarCiudad(id) {\n    if (id) {\n      this.ciudadService.deleteDatosP(id).subscribe(data => {\n        console.log('Ciudad eliminada:', data);\n        this.cargarCiudades();\n      }, error => {\n        console.error('Error al eliminar ciudad:', error);\n      });\n    }\n  }\n};\nCiudadComponent = __decorate([Component({\n  selector: 'app-ciudad',\n  templateUrl: './ciudad.component.html',\n  styleUrls: ['./ciudad.component.css']\n})], CiudadComponent);","map":{"version":3,"names":["Component","Validators","ModalSeleccionPaisComponent","CiudadComponent","constructor","ciudadService","paisService","fb","modalService","ciudades","datosPaises","editingCiudadId","ciudadForm","group","_id","nombre","required","pais","ngOnInit","cargarCiudades","cargarDatosP","getDatosP","subscribe","data","console","log","error","crearCiudad","event","preventDefault","valid","nuevaCiudad","value","addDatosP","reset","abrirModalSeleccionPais","modalRef","open","result","then","patchValue","reason","editarCiudad","ciudad","eliminarCiudad","id","deleteDatosP","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Brayan Mendiola\\Documents\\GitHub\\IndraTorres\\src\\client\\src\\app\\components\\ciudad\\ciudad.component.ts"],"sourcesContent":["// ciudad.component.ts\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { CiudadService } from '../../services/ciudad.service';\r\nimport { DatosPService } from '../../services/datos-pservice.service';\r\nimport { CuidadModel } from '../../models/datosPModel';\r\nimport { DatosPModel } from '../../models/datosPModel';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ModalSeleccionPaisComponent } from '../../tu-ruta/modal-seleccion-pais/modal-seleccion-pais.component';\r\n\r\n@Component({\r\n  selector: 'app-ciudad',\r\n  templateUrl: './ciudad.component.html',\r\n  styleUrls: ['./ciudad.component.css']\r\n})\r\nexport class CiudadComponent implements OnInit {\r\n  ciudades: CuidadModel[] = [];\r\n  datosPaises: DatosPModel[] = [];\r\n  ciudadForm: FormGroup;\r\n  editingCiudadId: string | null = null;\r\n\r\n  constructor(\r\n    private ciudadService: CiudadService,\r\n    private paisService: DatosPService,\r\n    private fb: FormBuilder,\r\n    private modalService: NgbModal\r\n  ) {\r\n    this.ciudadForm = this.fb.group({\r\n      _id: [''],\r\n      nombre: ['', Validators.required],\r\n      pais: ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.cargarCiudades();\r\n    this.cargarDatosP();\r\n  }\r\n\r\n  cargarCiudades() {\r\n    this.ciudadService.getDatosP().subscribe(\r\n      data => {\r\n        this.ciudades = data;\r\n        console.log('Ciudades cargadas:', this.ciudades);\r\n      },\r\n      error => {\r\n        console.error('Error al cargar ciudades:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  cargarDatosP() {\r\n    this.paisService.getDatosP().subscribe(\r\n      data => {\r\n        this.datosPaises = data;\r\n        console.log('Datos cargados:', this.datosPaises);\r\n      },\r\n      error => {\r\n        console.error('Error al cargar datos:', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  crearCiudad(event: Event) {\r\n    event.preventDefault();\r\n\r\n    if (this.ciudadForm.valid) {\r\n      const nuevaCiudad: CuidadModel = {\r\n        nombre: this.ciudadForm.value.nombre,\r\n        pais: this.ciudadForm.value.pais,\r\n      };\r\n\r\n      this.ciudadService.addDatosP(nuevaCiudad).subscribe(\r\n        data => {\r\n          console.log('Ciudad creada:', data);\r\n          this.ciudadForm.reset();\r\n          this.cargarCiudades();\r\n        },\r\n        error => {\r\n          console.error('Error al crear ciudad:', error);\r\n        }\r\n      );\r\n    } else {\r\n      console.error('Formulario no válido. Por favor, complete todos los campos requeridos.');\r\n    }\r\n  }\r\n\r\n  abrirModalSeleccionPais() {\r\n    const modalRef = this.modalService.open(ModalSeleccionPaisComponent);\r\n\r\n    modalRef.result.then(\r\n      (result) => {\r\n        // Aquí puedes manejar el resultado seleccionado, por ejemplo:\r\n        this.ciudadForm.patchValue({ pais: result.nombre });\r\n      },\r\n      (reason) => {\r\n        // Manejar cierre del modal sin selección si es necesario\r\n      }\r\n    );\r\n  }\r\n\r\n  editarCiudad(ciudad: CuidadModel) {\r\n    this.editingCiudadId = ciudad._id;\r\n    this.ciudadForm.patchValue({\r\n      _id: ciudad._id,\r\n      nombre: ciudad.nombre,\r\n      pais: ciudad.pais,\r\n    });\r\n  }\r\n\r\n  eliminarCiudad(id: string | undefined) {\r\n    if (id) {\r\n      this.ciudadService.deleteDatosP(id).subscribe(\r\n        data => {\r\n          console.log('Ciudad eliminada:', data);\r\n          this.cargarCiudades();\r\n        },\r\n        error => {\r\n          console.error('Error al eliminar ciudad:', error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}